<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>【计组大作业】单周期CPU | Four&#39;s</title><meta name="description" content="&amp;emsp;&amp;emsp;奋战一星期，造台单周期"><meta property="og:type" content="article"><meta property="og:title" content="【计组大作业】单周期CPU"><meta property="og:url" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/index.html"><meta property="og:site_name" content="Four&#39;s"><meta property="og:description" content="&amp;emsp;&amp;emsp;奋战一星期，造台单周期"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu1.png"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu2.png"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu3.png"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu4.png"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu5.png"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu6.png"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu7.png"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu8.png"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu9.png"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu10.png"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu11.png"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu12.png"><meta property="og:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu13.png"><meta property="article:published_time" content="2019-12-04T14:43:57.000Z"><meta property="article:modified_time" content="2022-01-26T08:21:10.000Z"><meta property="article:author" content="kqp"><meta property="article:tag" content="CPU"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu1.png"><link rel="canonical" href="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/index.html"><link rel="alternate" href="/atom.xml" title="Four&#39;s" type="application/atom+xml"><link rel="icon" href="/favicon_you_3.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link href="//cdn.jsdelivr.net/npm/katex@0.9.0/dist/katex.min.css" rel="stylesheet"><meta name="generator" content="Hexo 6.2.0"></head><body class="main-center" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="" target="_blank"><img class="img-circle img-rotate" src="/images/avatar.png" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">kqp</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">OIACMer / HKU_CS / LLer / TCS</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i></small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/personal/index"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="mailto:kuangqp1217@qq.com" target="_blank" title="Email" data-toggle="tooltip" data-placement="top"><i class="icon icon-email"></i></a></li><li><a href="http://wpa.qq.com/msgrd?v=3&uin=940240973&site=qq&menu=yes" target="_blank" title="Qq" data-toggle="tooltip" data-placement="top"><i class="icon icon-qq"></i></a></li><li><a href="https://twitter.com/yuan_four" target="_blank" title="Twitter" data-toggle="tooltip" data-placement="top"><i class="icon icon-twitter"></i></a></li><li><a href="https://github.com/l2l7l9p" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>总有一天会学习前端，亲自操刀改造博客的。（发出鸽子的声音）</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/OI-ACM/">OI/ACM</a><span class="category-list-count">199</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TCS/">TCS</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/project/">project</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%80%BB%E7%BB%93%E4%B8%8E%E6%B8%B8%E8%AE%B0/">总结与游记</a><span class="category-list-count">36</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9D%82%E5%86%99/">杂写</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%8E%A9/">玩</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9A%8F%E6%89%8Bacademy/">随手academy</a><span class="category-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/CPU/" style="font-size:13px">CPU</a> <a href="/tags/RNN/" style="font-size:13px">RNN</a> <a href="/tags/ZKP/" style="font-size:13.08px">ZKP</a> <a href="/tags/complexity/" style="font-size:13.08px">complexity</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size:13px">操作系统</a> <a href="/tags/%E7%A8%8B%E8%AE%BE/" style="font-size:13.08px">程设</a> <a href="/tags/%E7%AE%97%E6%B3%95-2-SAT/" style="font-size:13.08px">算法_2-SAT</a> <a href="/tags/%E7%AE%97%E6%B3%95-DP/" style="font-size:13.92px">算法_DP</a> <a href="/tags/%E7%AE%97%E6%B3%95-FFT-NTT/" style="font-size:13.46px">算法_FFT/NTT</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E4%BD%8D%E8%BF%90%E7%AE%97/" style="font-size:13.69px">算法_位运算</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%81%8F%E5%BA%8F%E5%85%B3%E7%B3%BB/" style="font-size:13.08px">算法_偏序关系</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%87%A0%E4%BD%95/" style="font-size:13.08px">算法_几何</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%88%86%E6%B2%BB/" style="font-size:13.15px">算法_分治</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%8D%9A%E5%BC%88/" style="font-size:13.08px">算法_博弈</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%90%AF%E5%8F%91%E5%BC%8F%E5%90%88%E5%B9%B6/" style="font-size:13.08px">算法_启发式合并</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%9B%BE%E8%AE%BA/" style="font-size:13.54px">算法_图论</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%A4%9A%E9%A1%B9%E5%BC%8F-%E7%94%9F%E6%88%90%E5%87%BD%E6%95%B0/" style="font-size:13.54px">算法_多项式/生成函数</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%AD%97%E7%AC%A6%E4%B8%B2/" style="font-size:13.38px">算法_字符串</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%B9%B3%E8%A1%A1%E6%A0%91-set/" style="font-size:13.08px">算法_平衡树/set</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%B9%B3%E8%A1%A1%E8%A7%84%E5%88%92%EF%BC%88%E5%AE%9A%E6%9C%9F%E9%87%8D%E6%9E%84%EF%BC%89/" style="font-size:13px">算法_平衡规划（定期重构）</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E5%B9%B6%E6%9F%A5%E9%9B%86/" style="font-size:13.31px">算法_并查集</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E6%89%AB%E6%8F%8F%E7%BA%BF/" style="font-size:13.08px">算法_扫描线</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E6%95%B0%E5%AD%A6/" style="font-size:13.08px">算法_数学</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E6%95%B0%E8%AE%BA/" style="font-size:13.85px">算法_数论</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E6%9C%80%E7%9F%AD%E8%B7%AF%E6%A8%A1%E5%9E%8B/" style="font-size:13.23px">算法_最短路模型</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E6%9E%84%E9%80%A0%E9%A2%98/" style="font-size:13.62px">算法_构造题</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E6%9E%90%E5%90%88%E6%A0%91/" style="font-size:13px">算法_析合树</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E6%A0%91%E9%93%BE%E5%89%96%E5%88%86/" style="font-size:13.08px">算法_树链剖分</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E6%A0%B9%E5%8F%B7%E5%B9%B3%E8%A1%A1/" style="font-size:13.23px">算法_根号平衡</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E6%A6%82%E7%8E%87%E4%B8%8E%E6%9C%9F%E6%9C%9B/" style="font-size:13.23px">算法_概率与期望</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E7%82%B9%E5%88%86%E6%B2%BB/" style="font-size:13.15px">算法_点分治</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E7%8E%AF%E5%A5%97%E6%A0%91/" style="font-size:13.08px">算法_环套树</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E7%9F%A9%E9%98%B5%E4%B9%98%E6%B3%95/" style="font-size:13.31px">算法_矩阵乘法</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E7%A5%9E%E5%A5%87%E7%9A%84%E8%84%91%E6%B4%9E/" style="font-size:14px">算法_神奇的脑洞</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/" style="font-size:13.23px">算法_线性代数</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E7%BA%BF%E6%AE%B5%E6%A0%91/" style="font-size:13.77px">算法_线段树</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E7%BD%91%E7%BB%9C%E6%B5%81-%E5%8C%B9%E9%85%8D/" style="font-size:13.54px">算法_网络流/匹配</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E7%BE%A4%E8%AE%BA/" style="font-size:13.08px">算法_群论</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E8%8E%AB%E9%98%9F-%E5%88%86%E5%9D%97/" style="font-size:13.46px">算法_莫队/分块</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E8%AE%A1%E6%95%B0/" style="font-size:13.08px">算法_计数</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E8%B4%AA%E5%BF%83/" style="font-size:13.23px">算法_贪心</a> <a href="/tags/%E7%AE%97%E6%B3%95-%E9%9A%8F%E6%9C%BA%E5%A4%A7%E6%B3%95/" style="font-size:13.38px">算法_随机大法</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%99%A8/" style="font-size:13.08px">编译器</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">17</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/TCS/">TCS</a></p><p class="item-title"><a href="/OV/" class="title">Orthogonal Vectors Problem 相关</a></p><p class="item-date"><time datetime="2022-10-27T08:01:11.000Z" itemprop="datePublished">2022-10-27</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/TCS/">TCS</a></p><p class="item-title"><a href="/ZKP/" class="title">零知识证明大整理</a></p><p class="item-date"><time datetime="2022-09-14T03:30:10.000Z" itemprop="datePublished">2022-09-14</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E7%8E%A9/">玩</a></p><p class="item-title"><a href="/nijigaku_5th_live/" class="title">虹咲5th live</a></p><p class="item-date"><time datetime="2022-09-10T13:43:58.000Z" itemprop="datePublished">2022-09-10</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/%E7%8E%A9/">玩</a></p><p class="item-title"><a href="/Liella_S2/" class="title">Liella 第二季随笔</a></p><p class="item-date"><time datetime="2022-08-01T15:21:06.000Z" itemprop="datePublished">2022-08-01</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/OI-ACM/">OI/ACM</a><i class="icon icon-angle-right"></i><a class="category-link" href="/categories/%E6%80%BB%E7%BB%93%E4%B8%8E%E6%B8%B8%E8%AE%B0/">总结与游记</a></p><p class="item-title"><a href="/2021_EC_Final/" class="title">2021 EC Final 退休游记</a></p><p class="item-date"><time datetime="2022-07-22T06:37:00.000Z" itemprop="datePublished">2022-07-22</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-【计组大作业】单周期CPU" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">【计组大作业】单周期CPU</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/" class="article-date"><time datetime="2019-12-04T14:43:57.000Z" itemprop="datePublished">2019-12-04</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/project/">project</a> </span><span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link-link" href="/tags/CPU/" rel="tag">CPU</a> </span><span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span> </span></span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><p>&emsp;&emsp;<del>奋战一星期，造台单周期</del></p><span id="more"></span><h1 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h1><p>&emsp;&emsp;实现基于MIPS 指令集的单周期CPU，可执行如下34 种指令：<br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu1.png" title="‘’"><br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu2.png" title="‘’"><br>&emsp;&emsp;用 vivado 编写 CPU 工程，编写完成后，通过运行一份包含所有指令的汇编代码（将二进制代码储存于指令内存中），观察仿真信号及 FPGA 显示来检验 CPU 的正确性。</p><h1 id="Sol"><a href="#Sol" class="headerlink" title="Sol"></a>Sol</h1><p>&emsp;&emsp;当你读这篇 blog 的时候，你应当熟悉单周期 CPU 的工作流程、数据通路。这里给放一个简化版的数据通路图：<br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu3.png"></p><h2 id="Sol-1-CPU设计"><a href="#Sol-1-CPU设计" class="headerlink" title="Sol 1 CPU设计"></a>Sol 1 CPU设计</h2><h3 id="Sol-1-1-设计总述"><a href="#Sol-1-1-设计总述" class="headerlink" title="Sol 1.1 设计总述"></a>Sol 1.1 设计总述</h3><p>&emsp;&emsp;设计 CPU 应将 CPU 视作一个大的模块，自顶向下进行分解。<br>&emsp;&emsp;首先，确定其输入输出。由于 CPU 主要与内存进行数据交换，因此对外输入输出非常少。输入：时钟信号 clk、reset；输出：overflow 信号，若烧写至 FPGA 则增加 ALU 运算结果、当前指令等需要显示的信息。<br>&emsp;&emsp;然后，设计 CPU 的工作流程。根据单周期 CPU 的工作流程，当时钟上升沿到来时，一个新的周期开始，依次执行下列操作：<br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu4.png"><br>&emsp;&emsp;根据该工作流程，可以将 CPU 下分为几个子模块：<br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu5.png"></p><h3 id="Sol-1-2-实现细节"><a href="#Sol-1-2-实现细节" class="headerlink" title="Sol 1.2 实现细节"></a>Sol 1.2 实现细节</h3><p>&emsp;&emsp;代码其实很好写的，写 verilog 就跟写高级语言一样。<br>&emsp;&emsp;此处只放简略代码或伪代码，详细代码见最后下载。<br>&emsp;&emsp;约定一个周期由时钟上升沿开始，时钟由高电平到低电平。</p><h4 id="1-NextPC"><a href="#1-NextPC" class="headerlink" title="1) NextPC"></a>1) NextPC</h4><p>&emsp;&emsp;该模块储存有指令寄存器 PC，负责计算下一条 PC。<br>&emsp;&emsp;每当时钟上升沿到来，PC+=4。待控制信号准备好后，通过 branch 和 zero 决定是否进行 branch 型跳转，再根据 jmp 决定是否进行 J 型跳转。共 2 次经过选择器。第二次选择时有 j、jr 两种类型，故使用三选一选择器，jmp 使用 2 位信号。<br></p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">MUX32 m4(								<span class="comment">// 是否branch型跳转</span></span><br><span class="line">	<span class="variable">.A</span>(PCplus4),</span><br><span class="line">	<span class="variable">.B</span>(PCplus4+&#123;imm[<span class="number">29</span>:<span class="number">0</span>],<span class="number">2&#x27;b00</span>&#125;),</span><br><span class="line">	<span class="variable">.switch</span>(branch&amp;zero),</span><br><span class="line">	<span class="variable">.res</span>(nextPC1)</span><br><span class="line">);</span><br><span class="line">MUX32_3 m5(								<span class="comment">// 是否J型跳转</span></span><br><span class="line">	<span class="variable">.A</span>(nextPC1),</span><br><span class="line">	<span class="variable">.B</span>(&#123;PCplus4[<span class="number">31</span>:<span class="number">28</span>],jmpInst,<span class="number">2&#x27;b00</span>&#125;),	<span class="comment">// jmpInst=instruction[25:0]</span></span><br><span class="line">	<span class="variable">.C</span>(ra),</span><br><span class="line">	<span class="variable">.switch</span>(jmp),</span><br><span class="line">	<span class="variable">.res</span>(nextPC2)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">always</span> @ (<span class="keyword">posedge</span> clk)</span><br><span class="line">	<span class="keyword">if</span> (reset)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		PC=<span class="number">0</span>;</span><br><span class="line">		PCplus4=<span class="number">4</span>;</span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">else</span></span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		PC=nextPC2;</span><br><span class="line">		PCplus4=PC+<span class="number">4</span>;</span><br><span class="line">	<span class="keyword">end</span></span><br></pre></td></tr></table></figure><p></p><h4 id="2-memory"><a href="#2-memory" class="headerlink" title="2) memory"></a>2) memory</h4><p>&emsp;&emsp;该模块负责管理内存，包括指令内存和数据内存。<br>&emsp;&emsp;该部分使用系统 IP 核实现，指令内存用单口 ROM，数据内存用双口 RAM（一个口读，一个口写）。<br>&emsp;&emsp;为了方便并行读写 1 个 word（4 byte）的数据，使用 8 位宽度的 IP 核，实例化 4 次，分别代表一个 word 的 31~24位、23~16位、15~8位、7~0 位。该 word 的 4 份内存的地址高 30 位相同，因此实际操作中，使用实际地址的高 30 位作为每个 IP 核的地址。<br></p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Instruction_Memory31_24 imem31_24(</span><br><span class="line">	<span class="variable">.clka</span>(rclk),						<span class="comment">// 读时钟频率非常高，等价于随时可读</span></span><br><span class="line">	<span class="variable">.ena</span>(<span class="number">1&#x27;b1</span>),</span><br><span class="line">	<span class="variable">.addra</span>(PC[effiPCwidth+<span class="number">1</span>:<span class="number">2</span>]),		<span class="comment">// effiPCwidth为ip核的地址大小</span></span><br><span class="line">	<span class="variable">.douta</span>(instruction[<span class="number">31</span>:<span class="number">24</span>])</span><br><span class="line">);</span><br><span class="line">Data_Memory dmem31_24(</span><br><span class="line">	<span class="variable">.clka</span>(wclk),</span><br><span class="line">	<span class="variable">.ena</span>(<span class="number">1&#x27;b1</span>),</span><br><span class="line">	<span class="variable">.wea</span>(memWrite),</span><br><span class="line">	<span class="variable">.addra</span>(DMadd[effiDATAwidth+<span class="number">1</span>:<span class="number">2</span>]), 	<span class="comment">// effiDATAwidth为ip核的地址大小</span></span><br><span class="line">	<span class="variable">.dina</span>(DMdata[<span class="number">31</span>:<span class="number">24</span>]),</span><br><span class="line">	<span class="variable">.clkb</span>(rclk),</span><br><span class="line">	<span class="variable">.enb</span>(memRead),</span><br><span class="line">	<span class="variable">.addrb</span>(DMadd[effiDATAwidth+<span class="number">1</span>:<span class="number">2</span>]),</span><br><span class="line">	<span class="variable">.doutb</span>(DMres[<span class="number">31</span>:<span class="number">24</span>])</span><br><span class="line">);</span><br></pre></td></tr></table></figure><br>&emsp;&emsp;本次实验没有实现半字、字节读写操作，但在此设计上要添加这些操作是很容易的，只需根据地址的最后 2 位模 4 的余数选择对应的 IP 核即可。<p></p><h4 id="3-control"><a href="#3-control" class="headerlink" title="3) control"></a>3) control</h4><p>&emsp;&emsp;该模块计算控制信号。使用 case 语句，对 aluop 或 funct 进行讨论即可。<br>&emsp;&emsp;由于 R 型指令判断较为复杂，故此处再分成两个子模块，一个是通用 control 模块，计算不针对 R 型指令的控制信号；一个是 alucontrol 模块，计算针对 R 型指的控制信号。<br>&emsp;&emsp;控制信号作用表如下：（其中 zero 不在该模块计算）<br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu6.png"><br>&emsp;&emsp;示例代码如下：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> control();</span><br><span class="line">	<span class="keyword">assign</span> memRead=(opcode==<span class="number">6&#x27;b100011</span>);</span><br><span class="line">	<span class="keyword">assign</span> memWrite=(opcode==<span class="number">6&#x27;b101011</span>);</span><br><span class="line">	<span class="keyword">always</span> @ (opcode)</span><br><span class="line">		<span class="keyword">case</span> (opcode)</span><br><span class="line">			<span class="comment">// 讨论确定regDst,aluSrcB,memToReg,regWrite,branch,aluop,jmp,ExtOp</span></span><br><span class="line">		<span class="keyword">endcase</span></span><br><span class="line"><span class="keyword">endmodule</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">module</span> alucontrol();</span><br><span class="line">	<span class="keyword">always</span> @ (aluop <span class="keyword">or</span> funct)</span><br><span class="line">		<span class="keyword">if</span> (aluop==<span class="number">4&#x27;b1111</span>)</span><br><span class="line">		<span class="keyword">begin</span></span><br><span class="line">			<span class="keyword">casex</span> (funct)</span><br><span class="line">				<span class="comment">// 讨论确定aluCtr</span></span><br><span class="line">			<span class="keyword">endcase</span></span><br><span class="line">		<span class="keyword">end</span> <span class="keyword">else</span> aluCtr =aluop;</span><br><span class="line">	<span class="comment">// sll,slr,sra</span></span><br><span class="line">	<span class="keyword">assign</span> aluSrcA=(aluop==<span class="number">4&#x27;b1111</span> &amp;&amp; (funct==<span class="number">6&#x27;d0</span> || funct==<span class="number">6&#x27;b000010</span> || funct==<span class="number">6&#x27;b000011</span>));</span><br><span class="line">	<span class="comment">// jr	由于jr是R型指令，故其jmp需要在这里判断</span></span><br><span class="line">	<span class="keyword">assign</span> outjmp=(aluop==<span class="number">4&#x27;b1111</span> &amp;&amp; funct==<span class="number">6&#x27;b001000</span>) ?<span class="number">2&#x27;b10</span> :injmp ;</span><br><span class="line"><span class="keyword">endmodule</span></span><br></pre></td></tr></table></figure><h4 id="4-Register"><a href="#4-Register" class="headerlink" title="4) Register"></a>4) Register</h4><p>&emsp;&emsp;该模块储存有 32 个常规寄存器、hi、lo，其中 31 号寄存器为 ra。<br>&emsp;&emsp;该部分主要实现寄存器的读写，比较简单。<br></p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">reg</span> [width-<span class="number">1</span>:<span class="number">0</span>] tmp [<span class="number">0</span>:<span class="number">31</span>];		<span class="comment">// 需要初始化</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">always</span> @ (<span class="keyword">posedge</span> clk)			<span class="comment">// 写</span></span><br><span class="line">	<span class="keyword">if</span> (regWrite)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		tmp[addrW]=W;</span><br><span class="line">		hi=calcHi;				<span class="comment">// hi和lo的写入值用calcHi和calcLo表示</span></span><br><span class="line">		lo=calcLo;</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">assign</span> A=tmp[addrA];			<span class="comment">// 读</span></span><br><span class="line"><span class="keyword">assign</span> B=tmp[addrB];</span><br><span class="line"><span class="keyword">assign</span> ra=tmp[<span class="number">5&#x27;d31</span>];</span><br></pre></td></tr></table></figure><p></p><h4 id="5-ALU"><a href="#5-ALU" class="headerlink" title="5) ALU"></a>5) ALU</h4><p>&emsp;&emsp;该模块进行运算，并计算 ovf 和 zero。<br>&emsp;&emsp;使用 case 语句，根据 aluCtr 讨论进行相应的运算即可。注意一些细节，区分有符号数和无符号数。默认是无符号数，只需用 <code>$signed()</code> 这个东西把变量套起来，就是有符号数了。</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @(A <span class="keyword">or</span> B <span class="keyword">or</span> aluCtr <span class="keyword">or</span> hi <span class="keyword">or</span> lo)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	ovf=<span class="number">0</span>;</span><br><span class="line">	zero=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">case</span> (aluCtr)</span><br><span class="line">		<span class="comment">// 讨论计算 ALUres、calcHi、calcLo</span></span><br><span class="line">		<span class="comment">// 加法时判断ovf，减法时判断zero</span></span><br><span class="line">	<span class="keyword">endcase</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><h4 id="6-MUX"><a href="#6-MUX" class="headerlink" title="6) MUX"></a>6) MUX</h4><p>&emsp;&emsp;该模块提供不同型号的选择器。<br>&emsp;&emsp;在该 CPU 中，共用到 3 种选择器：5 位三选一、32 位二选一、32 位三选一。<br></p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">assign</span> res=(switch) ?B :A ;			<span class="comment">// 二选一</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">always</span> @ (A <span class="keyword">or</span> B <span class="keyword">or</span> C <span class="keyword">or</span> switch)	<span class="comment">// 三选一</span></span><br><span class="line">	<span class="keyword">case</span> (switch)</span><br><span class="line">		<span class="number">2&#x27;b00</span>: res=A;</span><br><span class="line">		<span class="number">2&#x27;b01</span>: res=B;</span><br><span class="line">		<span class="number">2&#x27;b10</span>: res=C;</span><br><span class="line">	<span class="keyword">endcase</span></span><br></pre></td></tr></table></figure><p></p><h4 id="7-extended"><a href="#7-extended" class="headerlink" title="7) extended"></a>7) extended</h4><p>&emsp;&emsp;该模块提供有/无符号立即数扩展。若有符号扩展，则 31~16 位为原数第 15 位；若无符号扩展，则 31~16 位为 0。<br></p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">always</span> @ (in <span class="keyword">or</span> ExtOp)</span><br><span class="line">	out=(ExtOp) ?&#123;&#123;half&#123;in[half-<span class="number">1</span>]&#125;&#125;,in&#125; :&#123;&#123;half&#123;<span class="number">1&#x27;b0</span>&#125;&#125;,in&#125; ;</span><br></pre></td></tr></table></figure><p></p><h4 id="8-top"><a href="#8-top" class="headerlink" title="8) top"></a>8) top</h4><p>&emsp;&emsp;千辛万苦来到了总模块。该模块作为数据通路，连接各子模块。具体来说，就是实例化各子模块，并通过 wire 连接起来。<br></p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">NextPC nxtpc();</span><br><span class="line">memory mem();</span><br><span class="line">control ctr();</span><br><span class="line">alucontrol aluct();</span><br><span class="line">MUX5 m1();				<span class="comment">// 根据regDst选择寄存器写地址</span></span><br><span class="line">Register regfile();</span><br><span class="line">extended ex();</span><br><span class="line">MUX32 m2A();			<span class="comment">// 根据aluSrcA选择ALU运算A口</span></span><br><span class="line">MUX32 m2B();			<span class="comment">// 根据aluSrcB选择ALU运算B口</span></span><br><span class="line">ALU alu();</span><br><span class="line">MUX32_3 m3();			<span class="comment">// 根据memToReg选择寄存器写数据</span></span><br></pre></td></tr></table></figure><br>&emsp;&emsp;同时需要在 top 模块定义主时钟。输入的时钟信号是 10^8 Hz 的，此处分频做一个 1 MHz 的主时钟（还可以更快，但是懒得加速了。<del>反正就这种玩具 CPU 的速度，四舍五入约等于没有</del>）。而 10^8 Hz 的时钟信号正好用作内存模块的读时钟。<br><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">integer</span> clk_cnt;</span><br><span class="line"><span class="keyword">reg</span> clk_1MHz;</span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk) </span><br><span class="line">	<span class="keyword">if</span>(clk_cnt==<span class="number">32&#x27;d50</span>)</span><br><span class="line">	<span class="keyword">begin</span></span><br><span class="line">		clk_cnt &lt;= <span class="number">1&#x27;b0</span>;</span><br><span class="line">		clk_1MHz &lt;= ~clk_1MHz;</span><br><span class="line">	<span class="keyword">end</span> <span class="keyword">else</span> clk_cnt &lt;= clk_cnt + <span class="number">1&#x27;b1</span>;</span><br><span class="line"><span class="keyword">initial</span> <span class="keyword">begin</span></span><br><span class="line">	clk_cnt=<span class="number">0</span>;</span><br><span class="line">	clk_1MHz=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><br>&emsp;&emsp;该模块还需要处理一些细节，如指令为 bne 时 zero 需要取反等。<p></p><p>&emsp;&emsp;到这里，CPU 工程就编写完成啦。</p><h3 id="Sol-2-仿真检验"><a href="#Sol-2-仿真检验" class="headerlink" title="Sol 2 仿真检验"></a>Sol 2 仿真检验</h3><p>&emsp;&emsp;根据实现的 34 种指令，设计出以下用于检验的 MIPS 程序。该程序有三个 Test 函数，Test1 是 ALU 测试，Test2 是内存读写测试，Test3 是控制测试。<br></p><figure class="highlight mips"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">.text</span></span><br><span class="line"><span class="symbol">main:</span>	<span class="keyword">addi	</span>$<span class="built_in">t1</span>, $<span class="number">0</span>, <span class="number">5</span></span><br><span class="line">		<span class="keyword">addi	</span>$<span class="built_in">t2</span>, $<span class="number">0</span>, <span class="number">6</span></span><br><span class="line">		<span class="keyword">jal	</span>	Test1				<span class="comment"># ALU Test</span></span><br><span class="line">		<span class="keyword">jal	</span>	Test2				<span class="comment"># Memory Test</span></span><br><span class="line">		<span class="keyword">j	</span>	Test3				<span class="comment"># Jump and Branch Test</span></span><br><span class="line"><span class="symbol">		</span></span><br><span class="line"><span class="symbol">Test1:</span>	<span class="keyword">div	</span>	$<span class="built_in">t2</span>, $<span class="built_in">t1</span>			<span class="comment"># ALU Test</span></span><br><span class="line">		<span class="keyword">mult	</span>$<span class="built_in">t1</span>, $<span class="built_in">t2</span></span><br><span class="line">		<span class="keyword">add	</span>	$<span class="built_in">t5</span>, $<span class="built_in">t1</span>, $<span class="built_in">t2</span></span><br><span class="line">		<span class="keyword">addu	</span>$<span class="built_in">t6</span>, $<span class="built_in">t1</span>, $<span class="built_in">t2</span></span><br><span class="line">		<span class="keyword">addiu	</span>$<span class="built_in">t7</span>, $<span class="built_in">t1</span>, <span class="number">34</span>		<span class="comment"># addi has already been tested</span></span><br><span class="line">		<span class="keyword">sub	</span>	$<span class="built_in">t5</span>, $<span class="built_in">t1</span>, $<span class="built_in">t2</span></span><br><span class="line">		<span class="keyword">subu	</span>$<span class="built_in">t6</span>, $<span class="built_in">t1</span>, $<span class="built_in">t2</span></span><br><span class="line">		<span class="keyword">mfhi	</span>$<span class="built_in">t3</span></span><br><span class="line">		<span class="keyword">mflo	</span>$<span class="built_in">t4</span></span><br><span class="line">		<span class="keyword">and	</span>	$<span class="built_in">t5</span>, $<span class="built_in">t1</span>, $<span class="built_in">t4</span></span><br><span class="line">		<span class="keyword">andi	</span>$<span class="built_in">t6</span>, $<span class="built_in">t1</span>, <span class="number">30</span></span><br><span class="line">		<span class="keyword">or	</span>	$<span class="built_in">t5</span>, $<span class="built_in">t1</span>, $<span class="built_in">t4</span></span><br><span class="line">		<span class="keyword">ori	</span>	$<span class="built_in">t6</span>, $<span class="built_in">t1</span>, <span class="number">30</span></span><br><span class="line">		<span class="keyword">xor	</span>	$<span class="built_in">t5</span>, $<span class="built_in">t1</span>, $<span class="built_in">t4</span></span><br><span class="line">		<span class="keyword">xori	</span>$<span class="built_in">t6</span>, $<span class="built_in">t1</span>, <span class="number">30</span></span><br><span class="line">		<span class="keyword">nor	</span>	$<span class="built_in">t5</span>, $<span class="built_in">t1</span>, $<span class="built_in">t4</span></span><br><span class="line">		<span class="keyword">addi	</span>$<span class="built_in">t4</span>, $<span class="number">0</span>, -<span class="number">10</span></span><br><span class="line">		<span class="keyword">div	</span>	$<span class="built_in">t4</span>, $<span class="built_in">t1</span></span><br><span class="line">		<span class="keyword">mult	</span>$<span class="built_in">t4</span>, $<span class="built_in">t1</span></span><br><span class="line">		<span class="keyword">slt	</span>	$<span class="built_in">t5</span>, $<span class="built_in">t1</span>, $<span class="built_in">t2</span></span><br><span class="line">		<span class="keyword">sltu	</span>$<span class="built_in">t6</span>, $<span class="built_in">t1</span>, $<span class="built_in">t4</span></span><br><span class="line">		<span class="keyword">slti	</span>$<span class="built_in">t7</span>, $<span class="built_in">t1</span>, -<span class="number">1</span></span><br><span class="line">		<span class="keyword">sll	</span>	$<span class="built_in">t1</span>, $<span class="built_in">t1</span>, <span class="number">17</span></span><br><span class="line">		<span class="keyword">sltiu	</span>$<span class="built_in">t8</span>, $<span class="built_in">t1</span>, -<span class="number">1</span></span><br><span class="line">		<span class="keyword">srl	</span>	$<span class="built_in">t5</span>, $<span class="built_in">t4</span>, <span class="number">2</span></span><br><span class="line">		<span class="keyword">sra	</span>	$<span class="built_in">t6</span>, $<span class="built_in">t4</span>, <span class="number">2</span></span><br><span class="line">		<span class="keyword">sllv	</span>$<span class="built_in">t5</span>, $<span class="built_in">t4</span>, $<span class="built_in">t2</span></span><br><span class="line">		<span class="keyword">srlv	</span>$<span class="built_in">t6</span>, $<span class="built_in">t4</span>, $<span class="built_in">t2</span></span><br><span class="line">		<span class="keyword">srav	</span>$<span class="built_in">t7</span>, $<span class="built_in">t4</span>, $<span class="built_in">t2</span></span><br><span class="line">		<span class="keyword">jr	</span>	$<span class="built_in">ra</span></span><br><span class="line"><span class="symbol">		</span></span><br><span class="line"><span class="symbol">Test2:</span>	<span class="keyword">sw	</span>	$<span class="built_in">t1</span>, <span class="number">0x0</span>($<span class="number">0</span>)		<span class="comment"># Memory Test</span></span><br><span class="line">		<span class="keyword">sw	</span>	$<span class="built_in">t2</span>, <span class="number">0x4</span>($<span class="number">0</span>)</span><br><span class="line">		<span class="keyword">lw	</span>	$<span class="built_in">t5</span>, <span class="number">0x0</span>($<span class="number">0</span>)</span><br><span class="line">		<span class="keyword">lw	</span>	$<span class="built_in">t6</span>, <span class="number">0x4</span>($<span class="number">0</span>)</span><br><span class="line">		<span class="keyword">jr	</span>	$<span class="built_in">ra</span></span><br><span class="line"><span class="symbol">		</span></span><br><span class="line"><span class="symbol">Test3:</span>	<span class="keyword">beq	</span>	$<span class="built_in">t3</span>, $<span class="number">0</span>, label1	<span class="comment"># Jump and Branch Test</span></span><br><span class="line">		<span class="keyword">addi	</span>$<span class="built_in">t5</span>, $<span class="number">0</span>, <span class="number">16</span></span><br><span class="line"><span class="symbol">label1:</span>	<span class="keyword">bne	</span>	$<span class="built_in">t1</span>, $<span class="built_in">t2</span>, label2</span><br><span class="line">		<span class="keyword">addi	</span>$<span class="built_in">t5</span>, $<span class="number">0</span>, <span class="number">16</span></span><br><span class="line"><span class="symbol">label2:</span>	<span class="keyword">beq	</span>	$<span class="built_in">t1</span>, $<span class="built_in">t2</span>, label3</span><br><span class="line">		<span class="keyword">addi	</span>$<span class="built_in">t6</span>, $<span class="number">0</span>, <span class="number">17</span></span><br><span class="line"><span class="symbol">label3:</span>	<span class="keyword">bne	</span>	$<span class="built_in">t3</span>, $<span class="number">0</span>, label4</span><br><span class="line">		<span class="keyword">addi	</span>$<span class="built_in">t6</span>, $<span class="number">0</span>, <span class="number">18</span></span><br><span class="line"><span class="symbol">label4:</span>	<span class="keyword">addi	</span>$<span class="built_in">a0</span>, $<span class="number">0</span>, <span class="number">10</span></span><br><span class="line"><span class="symbol"></span></span><br><span class="line"><span class="symbol">Exit:</span>	<span class="keyword">syscall</span></span><br></pre></td></tr></table></figure><br>&emsp;&emsp;使用 Mars 编辑器可以方便地导出指令代码。16 进制代码及测试详解如下表：<br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu7.png"><br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu8.png"><br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu9.png"><br>&emsp;&emsp;不过 Mars 导出的指令代码是一个 text 的，而我们实例化了 4 次 ROM，因此需要写一个简单的脚本程序，做成 4 个 ROM 初始化文件，分别代表 31~24 位、23~16 位、15~8 位、7~0 位。<p></p><p>&emsp;&emsp;然后编写简单的仿真模块。vivado 中默认的周期是 1 ns，为了与 Basys3 板对应，需要分频形成一个 10^8 Hz 的时钟作为 CPU 的输入时钟信号（再由 top 自行分频形成 1 Mz 的主时钟）。<br></p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">top tp(<span class="variable">.clk</span>(clkin),<span class="variable">.reset</span>(reset),<span class="variable">.ovf</span>(ovf));</span><br><span class="line"></span><br><span class="line"><span class="keyword">parameter</span> PERIOD = <span class="number">10</span>; </span><br><span class="line"><span class="keyword">always</span> <span class="keyword">begin</span> </span><br><span class="line">	clkin = <span class="number">1&#x27;b0</span>; </span><br><span class="line">	<span class="variable">#(PERIOD / 2)</span> clkin = <span class="number">1&#x27;b1</span>; </span><br><span class="line">	<span class="variable">#(PERIOD / 2)</span> ; </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">initial</span> <span class="keyword">begin</span> </span><br><span class="line">	<span class="comment">// Initialize Inputs </span></span><br><span class="line">	clkin = <span class="number">0</span>;</span><br><span class="line">	reset=<span class="number">1</span>;</span><br><span class="line">	# <span class="number">100</span>;</span><br><span class="line">	reset=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><br>&emsp;&emsp;仿真结果如下：<br>&emsp;&emsp;（说明1：W 为寄存器写数据、A 为寄存器 A 口、B 为寄存器 B 口、aluA 为 ALU 运算 A 口、aluB 为 ALU 运算 B 口、memres 为内存读取结果、zerobne 为 zero^(opcode==bne) ）<br>&emsp;&emsp;（说明2：乘除法的计算结果储存在 calcHi 和 calcLo，周期结束时才写入 hi 和 lo）<br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu10.png"><br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu11.png"><br>&emsp;&emsp;篇幅限制，就只截两张图好了。<br>&emsp;&emsp;对照代码详解表的检测指标，所有指令执行正确。<p></p><h3 id="Sol-3-FPGA检验"><a href="#Sol-3-FPGA检验" class="headerlink" title="Sol 3 FPGA检验"></a>Sol 3 FPGA检验</h3><p>&emsp;&emsp;<del>这种玩具 CPU 真的有上板子的必要么。。</del><br>&emsp;&emsp;在 Basys3 板上，ovf 信号用一个 LED 灯显示，数码管一共 4 个，前两个显示 PC 最后两位，后两个显示 ALU 运算结果最后两位。<br>&emsp;&emsp;数码管需要添加一个 display 模块，该模块分四部分：分频、位选控制（即 0111 循环计数）、段选控制（根据位选，选择对应的数据段）、解码（将数据转化为 7 段管信号）。<br></p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 分频</span></span><br><span class="line"><span class="comment">// 同top的分频，此处分400Hz</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 位选控制</span></span><br><span class="line"><span class="keyword">reg</span> [<span class="number">3</span>:<span class="number">0</span>]wei_ctrl=<span class="number">4&#x27;b1110</span>;</span><br><span class="line"><span class="keyword">always</span> @(<span class="keyword">posedge</span> clk_400Hz) </span><br><span class="line">	wei_ctrl &lt;= &#123;wei_ctrl[<span class="number">2</span>:<span class="number">0</span>],wei_ctrl[<span class="number">3</span>]&#125;; </span><br><span class="line"></span><br><span class="line"><span class="comment">// 段选控制</span></span><br><span class="line"><span class="keyword">always</span> @(wei_ctrl)</span><br><span class="line">	<span class="keyword">case</span>(wei_ctrl) </span><br><span class="line">		<span class="number">4&#x27;b1110</span>:duan_ctrl=data[<span class="number">3</span>:<span class="number">0</span>]; </span><br><span class="line">		<span class="number">4&#x27;b1101</span>:duan_ctrl=data[<span class="number">7</span>:<span class="number">4</span>]; </span><br><span class="line">		<span class="number">4&#x27;b1011</span>:duan_ctrl=data[<span class="number">11</span>:<span class="number">8</span>];</span><br><span class="line">		<span class="number">4&#x27;b0111</span>:duan_ctrl=data[<span class="number">15</span>:<span class="number">12</span>];</span><br><span class="line">		<span class="keyword">default</span>:duan_ctrl=<span class="number">4&#x27;hf</span>;</span><br><span class="line">	<span class="keyword">endcase</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 解码</span></span><br><span class="line"><span class="keyword">always</span> @ (duan_ctrl)</span><br><span class="line">	<span class="keyword">case</span>(duan_ctrl)</span><br><span class="line">		<span class="comment">// 根据duan_ctrl确定7位七段管信号。</span></span><br><span class="line">	<span class="keyword">endcase</span></span><br></pre></td></tr></table></figure><br>&emsp;&emsp;并在 top 模块中调用。<br><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">display dsp(</span><br><span class="line">	<span class="variable">.clk</span>(clk),</span><br><span class="line">	<span class="variable">.data</span>(&#123;PC[<span class="number">7</span>:<span class="number">0</span>],W[<span class="number">7</span>:<span class="number">0</span>]&#125;),</span><br><span class="line">	<span class="variable">.sm_wei</span>(sm_wei),</span><br><span class="line">	<span class="variable">.sm_duan</span>(sm_duan)</span><br><span class="line">);</span><br></pre></td></tr></table></figure><br>&emsp;&emsp;接下来是实验结果。受篇幅限制，只展示部分指令。<br>&emsp;&emsp;选择 0x0000001C 开始的 6 条指令，检测 ALU 运算，结果如下：（前两位是指令地址，后两位是 ALU 结果）<br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu12.png"><br>&emsp;&emsp;对照代码详解表的检测指标，指令执行正确。<br>&emsp;&emsp;选择 0x0000009C 开始的 11 条指令（含跳转到别处的指令），检测跳转，结果如下：<br><img src="/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/cpu13.png"><br>&emsp;&emsp;对照代码详解表的检测指标，指令执行正确。<p></p><p>&emsp;&emsp;至此，完成。</p><h1 id="Sources"><a href="#Sources" class="headerlink" title="Sources"></a>Sources</h1><p>&emsp;&emsp;<a target="_blank" rel="noopener" href="https://github.com/l2l7l9p/Single-Cycle-CPU-based-on-MIPS">点我下载</a></p></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="http://kqp.world/%E3%80%90%E8%AE%A1%E7%BB%84%E5%A4%A7%E4%BD%9C%E4%B8%9A%E3%80%91%E5%8D%95%E5%91%A8%E6%9C%9FCPU/" title="【计组大作业】单周期CPU" target="_blank" rel="external">http://kqp.world/【计组大作业】单周期CPU/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/images/avatar.png" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="" target="_blank"><span class="text-dark">kqp</span><small class="ml-1x">OIACMer / HKU_CS / LLer / TCS</small></a></h3><div>糖少许，盐少许</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/%E3%80%90Ynoi2016%E3%80%91%E3%80%90bzoj4939%E3%80%91%E6%8E%89%E8%BF%9B%E5%85%94%E5%AD%90%E6%B4%9E%20%E9%A2%98%E8%A7%A3/" title="【Ynoi2016】【bzoj4939】掉进兔子洞 题解"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/2019_ICPC_shenyang/" title="2019ICPC沈阳捡漏记"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="mailto:kuangqp1217@qq.com" target="_blank" title="Email" data-toggle="tooltip" data-placement="top"><i class="icon icon-email"></i></a></li><li><a href="http://wpa.qq.com/msgrd?v=3&uin=940240973&site=qq&menu=yes" target="_blank" title="Qq" data-toggle="tooltip" data-placement="top"><i class="icon icon-qq"></i></a></li><li><a href="https://twitter.com/yuan_four" target="_blank" title="Twitter" data-toggle="tooltip" data-placement="top"><i class="icon icon-twitter"></i></a></li><li><a href="https://github.com/l2l7l9p" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!0,appId:"YsBbwGr5CQ2WyuobqGxOedtu-gzGzoHsz",appKey:"Wplm0hz1L65wFVye5hE8tOTf",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });</script><script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>